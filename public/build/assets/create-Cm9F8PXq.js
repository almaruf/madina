function m(){const n=document.getElementById("name"),e=document.getElementById("slug");n.addEventListener("input",a=>{const o=a.target.value.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");e.value=o})}function r(){return{name:document.getElementById("name").value,slug:document.getElementById("slug").value,description:document.getElementById("description").value||null,tagline:document.getElementById("tagline").value||null,domain:document.getElementById("domain").value||null,business_type:document.getElementById("business_type").value,specialization:document.getElementById("specialization").value,phone:document.getElementById("phone").value,email:document.getElementById("email").value,support_email:document.getElementById("support_email").value||null,whatsapp_number:document.getElementById("whatsapp_number").value||null,address_line_1:document.getElementById("address_line_1").value,address_line_2:document.getElementById("address_line_2").value||null,city:document.getElementById("city").value,postcode:document.getElementById("postcode").value,country:document.getElementById("country").value}}async function c(n){var o,l,d,u;n.preventDefault();const e=document.getElementById("submit-btn"),a=e.textContent;e.disabled=!0,e.textContent="Creating...";try{const t=r(),s=await axios.post("/api/admin/shops",t);window.toast.success("Shop created successfully!"),setTimeout(()=>{window.location.href="/admin/shops/"+s.data.slug},1e3)}catch(t){if(console.error("Error creating shop:",t),e.disabled=!1,e.textContent=a,(l=(o=t.response)==null?void 0:o.data)!=null&&l.errors){const s=Object.values(t.response.data.errors).flat();window.toast.error(s.join("<br>"))}else window.toast.error(((u=(d=t.response)==null?void 0:d.data)==null?void 0:u.message)||"Failed to create shop")}}document.addEventListener("DOMContentLoaded",()=>{m(),document.getElementById("shop-form").addEventListener("submit",c)});
