const a={success:e=>s(e,"success"),error:e=>s(e,"error"),warning:e=>s(e,"warning"),info:e=>s(e,"info")};function s(e,t="info"){const n=document.getElementById("toast-container"),o=document.createElement("div");o.className=`toast ${t}`;const i={success:"fa-check-circle",error:"fa-exclamation-circle",warning:"fa-exclamation-triangle",info:"fa-info-circle"};o.innerHTML=`
        <i class="fas ${i[t]} toast-icon"></i>
        <span class="flex-1">${e}</span>
        <button class="toast-close" onclick="this.parentElement.remove()">
            <i class="fas fa-times"></i>
        </button>
    `,n.appendChild(o),setTimeout(()=>{c(o)},4e3)}function c(e){e.classList.add("removing"),setTimeout(()=>{e.remove()},300)}window.toast=a;async function r(){try{const t=(await axios.get("/api/auth/user")).data;document.querySelectorAll(".role-restricted").forEach(n=>{n.dataset.roleRequired.split(",").includes(t.role)&&(n.style.display="flex")})}catch(e){console.error("Failed to fetch user role:",e),e.response&&e.response.status===401&&(window.location.href="/admin/login")}}document.addEventListener("DOMContentLoaded",()=>{r();const e=document.getElementById("mobile-menu-btn"),t=document.getElementById("sidebar");e&&t&&e.addEventListener("click",()=>{t.classList.toggle("active")}),document.querySelectorAll(".nav-link").forEach(o=>{o.addEventListener("click",()=>{window.innerWidth<768&&t&&t.classList.remove("active")})});const n=document.getElementById("logout-btn");n&&n.addEventListener("click",async()=>{try{await axios.post("/api/admin/logout"),localStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_token"),window.location.href="/admin/login"}catch{localStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_token"),window.location.href="/admin/login"}})});
