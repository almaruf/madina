const l=window.location.pathname.split("/").filter(Boolean),n=l[l.length-2];let e=null,r=[];async function s(){try{const[a,t]=await Promise.all([axios.get(`/api/admin/categories/${n}`),axios.get("/api/admin/categories")]);e=a.data,r=(t.data.data||t.data).filter(o=>o.slug!==n),m(),document.getElementById("loading-state").classList.add("hidden"),document.getElementById("category-form").classList.remove("hidden")}catch(a){console.error("Error loading category:",a),window.toast.error("Failed to load category details"),setTimeout(()=>window.location.href="/admin/categories",2e3)}}function m(){document.getElementById("name").value=e.name||"",document.getElementById("slug").value=e.slug||"",document.getElementById("description").value=e.description||"",document.getElementById("image").value=e.image||"",document.getElementById("order").value=e.order||0,document.getElementById("is_active").checked=e.is_active||!1,document.getElementById("is_featured").checked=e.is_featured||!1;const a=document.getElementById("parent_id");a.innerHTML='<option value="">None (Top Level)</option>'+r.map(t=>`
            <option value="${t.id}" ${t.id===e.parent_id?"selected":""}>
                ${t.name}
            </option>
        `).join("")}async function u(a){var o,d;a.preventDefault();const t={name:document.getElementById("name").value,slug:document.getElementById("slug").value||null,parent_id:document.getElementById("parent_id").value||null,description:document.getElementById("description").value||null,image:document.getElementById("image").value||null,order:parseInt(document.getElementById("order").value)||0,is_active:document.getElementById("is_active").checked,is_featured:document.getElementById("is_featured").checked};try{await axios.patch(`/api/admin/categories/${n}`,t),window.toast.success("Category updated successfully"),setTimeout(()=>window.location.href=`/admin/categories/${n}`,1500)}catch(i){console.error("Error updating category:",i);const c=((d=(o=i.response)==null?void 0:o.data)==null?void 0:d.message)||"Failed to update category";window.toast.error(c)}}window.handleSubmit=u;document.addEventListener("DOMContentLoaded",()=>{s()});
