document.addEventListener("DOMContentLoaded",function(){console.log("Category Create Page: Initializing..."),l(),d(),g();async function l(){try{const t=await axios.get("/api/admin/categories"),e=t.data.data||t.data,o=document.getElementById("parent_id");for(;o.options.length>1;)o.remove(1);e.forEach(a=>{const r=document.createElement("option");r.value=a.id,r.textContent=a.name,o.appendChild(r)}),console.log("Parent categories loaded:",e.length)}catch(t){console.error("Failed to load categories:",t)}}function d(){const t=document.getElementById("name"),e=document.getElementById("slug");t.addEventListener("input",function(){const a=this.value.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");e.value=a})}function g(){const t=document.getElementById("createForm"),e=document.getElementById("submitBtn");t.addEventListener("submit",async function(o){o.preventDefault();const a=document.getElementById("name").value.trim(),r=document.getElementById("slug").value.trim();if(!a||!r){alert("Please fill in all required fields");return}e.disabled=!0,e.innerHTML='<i class="fas fa-spinner fa-spin mr-2"></i>Creating...';try{const n={name:a,slug:r,description:document.getElementById("description").value.trim()||null,parent_id:document.getElementById("parent_id").value||null,order:parseInt(document.getElementById("order").value)||0,is_active:document.getElementById("is_active").checked,is_featured:document.getElementById("is_featured").checked};console.log("Creating category:",n);const s=await axios.post("/api/admin/categories",n);console.log("Category created:",s.data),alert("Category created successfully!"),window.location.href=`/admin/categories/${s.data.slug}`}catch(n){if(console.error("Error creating category:",n),e.disabled=!1,e.innerHTML='<i class="fas fa-save mr-2"></i>Create Category',n.response&&n.response.data){const s=n.response.data.errors;if(s){let i=`Validation errors:

`;Object.keys(s).forEach(c=>{i+=`${c}: ${s[c].join(", ")}
`}),alert(i)}else alert(n.response.data.message||"Failed to create category")}else alert("Failed to create category. Please try again.")}})}console.log("Category Create Page: Ready")});
